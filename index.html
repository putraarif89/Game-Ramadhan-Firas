<!doctype html>
<html lang="ms" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pusat Permainan Pintar Anakku</title>
    <script src="https://cdn.tailwindcss.com/3.4.17"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        * { font-family: 'Nunito', sans-serif; }
        .game-card { transition: all 0.3s ease; cursor: pointer; }
        .game-card:hover { transform: translateY(-5px); }
        .feedback-overlay { animation: pop-in 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes pop-in { 0% { transform: scale(0.5); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
        #timer-fill { transition: width 0.1s linear; }
    </style>
</head>
<body class="h-full bg-[#0f172a] text-white">

    <audio id="snd-happy" src="https://assets.mixkit.co/active_storage/sfx/2013/2013-preview.mp3"></audio>
    <audio id="snd-sad" src="https://assets.mixkit.co/active_storage/sfx/131/131-preview.mp3"></audio>

    <div id="app" class="min-h-full p-4">
        
        <div class="max-w-4xl mx-auto flex justify-between items-center mb-8">
            <h1 class="text-3xl font-black text-amber-400 uppercase">üéÆ Game Pintar</h1>
            <div class="bg-white/10 px-4 py-2 rounded-full text-cyan-300">
                Total ‚≠ê: <span id="total-stars" class="font-bold">0</span>
            </div>
        </div>

        <div id="menu-screen" class="max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-4"></div>

        <div id="game-screen" class="hidden max-w-lg mx-auto relative">
            <div class="flex justify-between mb-4 items-center">
                <button onclick="goHome()" class="text-sm bg-white/10 px-3 py-1 rounded">üè† Home</button>
                <div id="timer-bar" class="flex-1 mx-4 h-3 bg-white/20 rounded-full overflow-hidden">
                    <div id="timer-fill" class="h-full bg-green-500 w-full"></div>
                </div>
                <div id="live-stars" class="text-amber-400 font-bold">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
            </div>

            <div class="bg-white/10 backdrop-blur-xl rounded-3xl p-6 border border-white/20 shadow-2xl relative min-h-[400px] flex flex-col justify-center">
                <div id="q-emoji" class="text-7xl text-center mb-4"></div>
                <h2 id="q-text" class="text-2xl text-center font-bold mb-8 leading-tight"></h2>
                <div id="options-container" class="grid grid-cols-1 gap-3"></div>

                <div id="face-feedback" class="hidden absolute inset-0 flex flex-col items-center justify-center bg-black/90 rounded-3xl z-10 feedback-overlay">
                    <img id="child-img" src="" class="w-56 h-56 rounded-full border-8 border-white mb-4 object-cover">
                    <p id="face-msg" class="text-3xl font-black text-center"></p>
                </div>
            </div>
            <p class="text-center mt-4 text-cyan-400">Soalan <span id="q-count">1</span>/10</p>
        </div>

        <div id="result-screen" class="hidden max-w-lg mx-auto text-center py-10">
            <div id="res-emoji" class="text-9xl mb-4">üèÜ</div>
            <h2 class="text-4xl font-black text-amber-400 mb-2">SIAP!</h2>
            <div id="res-stars" class="text-5xl mb-4 text-amber-400 tracking-widest"></div>
            <p id="res-msg" class="text-2xl mb-8 font-bold text-white"></p>
            <button onclick="goHome()" class="w-full bg-gradient-to-r from-amber-400 to-orange-600 text-white font-bold py-4 rounded-2xl text-xl shadow-lg hover:scale-105 transition-transform">Main Game Lain üöÄ</button>
        </div>
    </div>

    <script>
        // ==========================================
        // KONFIGURASI GAMBAR ANAK (GANTI DI SINI)
        // ==========================================
        const MY_CHILD = {
            happy: "https://i.postimg.cc/q7XT9pKf/IMG-20260220-075549.jpg", // Baris 80
            sad: "https://i.postimg.cc/pr34mSjX/IMG-20260220-075532.jpg"      // Baris 81
        };

        const games = [
            { 
                id: 'ramadhan', title: 'Adab Ramadhan', emoji: 'üåô', color: 'from-emerald-500 to-teal-700', 
                data: [
                    { q: "Ramadhan bulan ke berapa?", o: ["7", "8", "9"], c: 2, e: "üåô" },
                    { q: "Makan sebelum Subuh?", o: ["Sahur", "Iftar", "Makan Malam"], c: 0, e: "üçΩÔ∏è" },
                    { q: "Bila kita berbuka?", o: ["Pagi", "Tengahari", "Maghrib"], c: 2, e: "üåÖ" },
                    { q: "Kitab turun bulan Ramadhan?", o: ["Injil", "Al-Quran", "Taurat"], c: 1, e: "üìñ" },
                    { q: "Solat malam bulan puasa?", o: ["Dhuha", "Tarawih", "Hajat"], c: 1, e: "ü§≤" },
                    { q: "Zakat sebelum Raya?", o: ["Fitrah", "Harta", "Emas"], c: 0, e: "üí∞" },
                    { q: "Buah sunnah berbuka?", o: ["Epal", "Kurma", "Anggur"], c: 1, e: "üçá" },
                    { q: "Malam seribu bulan?", o: ["Lailatul Qadar", "Israk Mikraj", "Nisfu Syaaban"], c: 0, e: "üåü" },
                    { q: "Hari raya selepas puasa?", o: ["Aidiladha", "Aidilfitri", "Raya Haji"], c: 1, e: "üéÅ" },
                    { q: "Tujuan puasa?", o: ["Kurus", "Bertaqwa", "Tidur"], c: 1, e: "‚ù§Ô∏è" },
                    { q: "Pintu syurga orang puasa?", o: ["Ar-Rayyan", "Firdaus", "Adn"], c: 0, e: "üö™" },
                    { q: "Bau mulut orang puasa disukai?", o: ["Manusia", "Kucing", "Allah"], c: 2, e: "üëÑ" },
                    { q: "Puasa menahan lapar dan?", o: ["Dahaga", "Ngantuk", "Lari"], c: 0, e: "ü•§" },
                    { q: "Berapa hari berpuasa?", o: ["20 hari", "29/30 hari", "40 hari"], c: 1, e: "üìÖ" },
                    { q: "Sunnah buka air apa?", o: ["Sejuk", "Manis/Kosong", "Gas"], c: 1, e: "ü•õ" },
                    { q: "Lepas sahur solat apa?", o: ["Zohor", "Subuh", "Asar"], c: 1, e: "üïå" },
                    { q: "Siapa wajib puasa?", o: ["Orang Islam", "Kucing", "Pokok"], c: 0, e: "üë§" },
                    { q: "Boleh makan sengaja?", o: ["Boleh", "Tidak", "Sikit"], c: 1, e: "üö´" },
                    { q: "Maksud Imsak?", o: ["Mula Puasa", "Mula Makan", "Tidur"], c: 0, e: "üïí" },
                    { q: "Niat puasa bila?", o: ["Malam hari", "Esok petang", "Bila lapar"], c: 0, e: "üìù" },
                    { q: "Banyakkan buat apa?", o: ["Main game", "Sedekah", "Jerit"], c: 1, e: "ü§≤" },
                    { q: "Boleh marah orang?", o: ["Boleh", "Sabar", "Mesti marah"], c: 1, e: "üò†" },
                    { q: "Nampak anak bulan tanda?", o: ["Mula Puasa", "Cuti", "Makan"], c: 0, e: "üî≠" },
                    { q: "Makan banyak bagus tak?", o: ["Ya", "Tidak bagus", "Suka hati"], c: 1, e: "üç≤" },
                    { q: "Maksud Ramadhan?", o: ["Sejuk", "Panas Terik", "Hujan"], c: 1, e: "üî•" },
                    { q: "Pemberi pahala puasa?", o: ["Kucing", "Mak Ayah", "Allah"], c: 2, e: "‚òùÔ∏è" },
                    { q: "Rukun Islam ke berapa?", o: ["Ke-1", "Ke-3", "Ke-5"], c: 1, e: "üèóÔ∏è" },
                    { q: "Tadarus maksudnya?", o: ["Baca Quran", "Main bola", "Tidur"], c: 0, e: "üîä" },
                    { q: "Lepas buka solat apa?", o: ["Subuh", "Maghrib", "Asar"], c: 1, e: "üåÜ" },
                    { q: "Bulan sebelum Ramadhan?", o: ["Syawal", "Syaaban", "Rejab"], c: 1, e: "üóìÔ∏è" }
                ]
            },
            { 
                id: 'math', title: 'Bijak Matematik', emoji: '‚ûï', color: 'from-blue-500 to-indigo-700',
                data: Array.from({length: 30}, (_, i) => {
                    const a = Math.floor(Math.random() * 10) + 1;
                    const b = Math.floor(Math.random() * 10) + 1;
                    const res = a + b;
                    return { q: `${a} + ${b} = ?`, o: [res-1, res, res+1].sort(() => Math.random()-0.5), c: 0, e: "üî¢" };
                }).map(item => {
                    const parts = item.q.split(' ');
                    const correctVal = parseInt(parts[0]) + parseInt(parts[2]);
                    return { ...item, c: item.o.indexOf(correctVal) };
                })
            },
            { 
                id: 'haiwan', title: 'Dunia Haiwan', emoji: 'ü¶Å', color: 'from-orange-500 to-red-700',
                data: [
                    { q: "Haiwan yang melompat?", o: ["Kura-kura", "Kanguru", "Ular"], c: 1, e: "ü¶ò" },
                    { q: "Haiwan leher panjang?", o: ["Gajah", "Zirafah", "Harimau"], c: 1, e: "ü¶í" },
                    { q: "Bunyi kucing?", o: ["Miau", "Guk guk", "Mbekk"], c: 0, e: "üê±" },
                    { q: "Ikan tinggal di mana?", o: ["Darat", "Air", "Awan"], c: 1, e: "üêü" },
                    { q: "Madu datang dari?", o: ["Lalat", "Lebah", "Semut"], c: 1, e: "üêù" },
                    { q: "Haiwan jalan lambat?", o: ["Arnab", "Siput", "Kuda"], c: 1, e: "üêå" },
                    { q: "Burung boleh cakap?", o: ["Parrot", "Itik", "Helang"], c: 0, e: "ü¶ú" },
                    { q: "Siapa Raja Rimba?", o: ["Monyet", "Singa", "Ular"], c: 1, e: "ü¶Å" },
                    { q: "Suka makan pisang?", o: ["Gajah", "Monyet", "Ayam"], c: 1, e: "üêí" },
                    { q: "Haiwan ada belalai?", o: ["Badak", "Gajah", "Zirafah"], c: 1, e: "üêò" },
                    { q: "Belang Hitam Putih?", o: ["Zebra", "Harimau", "Lembu"], c: 0, e: "ü¶ì" },
                    { q: "Haiwan paling besar?", o: ["Semut", "Gajah", "Kucing"], c: 1, e: "üêò" },
                    { q: "Haiwan ada lapan kaki?", o: ["Semut", "Labah-labah", "Lalat"], c: 1, e: "üï∑Ô∏è" },
                    { q: "Bangunkan kita pagi?", o: ["Ikan", "Ayam", "Kucing"], c: 1, e: "üêì" },
                    { q: "Berikan kita susu?", o: ["Lembu", "Ayam", "Ular"], c: 0, e: "üêÑ" },
                    { q: "Haiwan tiada kaki?", o: ["Ular", "Lembu", "Burung"], c: 0, e: "üêç" },
                    { q: "Arnab makan apa?", o: ["Daging", "Lobak", "Ikan"], c: 1, e: "ü•ï" },
                    { q: "Lebah buat apa?", o: ["Madu", "Nasi", "Air"], c: 0, e: "üêù" },
                    { q: "Haiwan berleher panjang?", o: ["Gajah", "Zirafah", "Harimau"], c: 1, e: "ü¶í" },
                    { q: "Suka makan tulang?", o: ["Kucing", "Anjing", "Lembu"], c: 1, e: "üê∂" },
                    { q: "Badak ada apa?", o: ["Cula", "Sayap", "Ekor panjang"], c: 0, e: "ü¶è" },
                    { q: "Haiwan di padang pasir?", o: ["Unta", "Ikan", "Beruang"], c: 0, e: "üê™" },
                    { q: "Monyet suka panjat apa?", o: ["Awan", "Pokok", "Air"], c: 1, e: "üå≥" },
                    { q: "Bunyi anjing?", o: ["Miau", "Guk Guk", "Ciap"], c: 1, e: "üêï" },
                    { q: "Kambing makan apa?", o: ["Daging", "Rumput", "Nasi"], c: 1, e: "üêê" },
                    { q: "Rama-rama asalnya?", o: ["Ikan", "Ulat", "Burung"], c: 1, e: "üêõ" },
                    { q: "Burung tidur di?", o: ["Sarang", "Air", "Bawah tanah"], c: 0, e: "ü™∫" },
                    { q: "Haiwan paling laju?", o: ["Siput", "Cheetah", "Kura-kura"], c: 1, e: "üêÜ" },
                    { q: "Kura-kura ada apa?", o: ["Sayap", "Cengkerang", "Bulu"], c: 1, e: "üê¢" },
                    { q: "Haiwan yang garang?", o: ["Arnab", "Harimau", "Hamster"], c: 1, e: "üêØ" }
                ]
            },
            { 
                id: 'warna', title: 'Dunia Warna', emoji: 'üé®', color: 'from-pink-500 to-purple-700',
                data: [
                    { q: "Warna Pisang?", o: ["Biru", "Kuning", "Merah"], c: 1, e: "üçå" },
                    { q: "Warna Daun?", o: ["Hijau", "Ungu", "Oren"], c: 0, e: "üçÉ" },
                    { q: "Warna Langit?", o: ["Kuning", "Biru", "Hitam"], c: 1, e: "‚òÅÔ∏è" },
                    { q: "Warna Epal?", o: ["Merah", "Biru", "Kuning"], c: 0, e: "üçé" },
                    { q: "Warna Oren?", o: ["Oren", "Hijau", "Putih"], c: 0, e: "üçä" },
                    { q: "Warna Susu?", o: ["Coklat", "Putih", "Hitam"], c: 1, e: "ü•õ" },
                    { q: "Warna Arang?", o: ["Putih", "Hitam", "Kelabu"], c: 1, e: "üåë" },
                    { q: "Warna Coklat?", o: ["Kuning", "Coklat", "Hijau"], c: 1, e: "üç´" },
                    { q: "Warna Anggur?", o: ["Kuning", "Ungu", "Biru"], c: 1, e: "üçá" },
                    { q: "Warna Strawberi?", o: ["Merah", "Hijau", "Hitam"], c: 0, e: "üçì" },
                    { q: "Merah + Kuning?", o: ["Hijau", "Oren", "Biru"], c: 1, e: "üé®" },
                    { q: "Biru + Kuning?", o: ["Hijau", "Merah", "Ungu"], c: 0, e: "üé®" },
                    { q: "Merah + Biru?", o: ["Ungu", "Hijau", "Kuning"], c: 0, e: "üé®" },
                    { q: "Warna Bendera Malaysia?", o: ["4 warna", "2 warna", "1 warna"], c: 0, e: "üá≤üáæ" },
                    { q: "Warna Terung?", o: ["Ungu", "Merah", "Kuning"], c: 0, e: "üçÜ" },
                    { q: "Warna Gagak?", o: ["Putih", "Hitam", "Jingga"], c: 1, e: "üê¶‚Äç‚¨õ" },
                    { q: "Warna Kapas?", o: ["Hitam", "Putih", "Biru"], c: 1, e: "‚òÅÔ∏è" },
                    { q: "Warna Cili Padi?", o: ["Biru", "Merah/Hijau", "Ungu"], c: 1, e: "üå∂Ô∏è" },
                    { q: "Warna Lobak?", o: ["Oren", "Biru", "Merah"], c: 0, e: "ü•ï" },
                    { q: "Warna Matahari?", o: ["Kuning/Jingga", "Hijau", "Biru"], c: 0, e: "‚òÄÔ∏è" },
                    { q: "Warna Flamingo?", o: ["Hijau", "Merah Jambu", "Coklat"], c: 1, e: "ü¶©" },
                    { q: "Warna Beruang Kutub?", o: ["Coklat", "Putih", "Hitam"], c: 1, e: "üêª‚Äç‚ùÑÔ∏è" },
                    { q: "Warna Gajah?", o: ["Kelabu", "Merah", "Kuning"], c: 0, e: "üêò" },
                    { q: "Warna Laut?", o: ["Hijau", "Biru", "Merah"], c: 1, e: "üåä" },
                    { q: "Warna Tayar?", o: ["Kuning", "Hitam", "Putih"], c: 1, e: "üõû" },
                    { q: "Warna Jalur Gemilang?", o: ["Warna-warni", "Merah Putih Biru Kuning", "Hitam"], c: 1, e: "üá≤üáæ" },
                    { q: "Warna Keris?", o: ["Kelabu/Hitam", "Biru", "Pink"], c: 0, e: "üó°Ô∏è" },
                    { q: "Warna Lembu?", o: ["Putih Hitam", "Biru", "Hijau"], c: 0, e: "üêÑ" },
                    { q: "Warna Labu?", o: ["Oren", "Biru", "Ungu"], c: 0, e: "üéÉ" },
                    { q: "Warna Tomato?", o: ["Biru", "Merah", "Kuning"], c: 1, e: "üçÖ" }
                ]
            },
            { id: 'sains', title: 'Sains Cilik', emoji: 'üöÄ', color: 'from-cyan-500 to-blue-700', data: Array.from({length: 30}, (_, i) => ({ q: `Soalan Sains #${i+1}`, o: ["Jawapan A", "Betul", "Jawapan C"], c: 1, e: "üß™" })) },
            { id: 'buah', title: 'Kebun Buah', emoji: 'üçé', color: 'from-red-500 to-rose-700', data: Array.from({length: 30}, (_, i) => ({ q: `Soalan Buah #${i+1}`, o: ["Salah", "Salah", "Betul"], c: 2, e: "üçç" })) },
            { id: 'kenderaan', title: 'Lalu Lintas', emoji: 'üèéÔ∏è', color: 'from-yellow-500 to-amber-700', data: Array.from({length: 30}, (_, i) => ({ q: `Kenderaan #${i+1}`, o: ["Betul", "Salah", "Salah"], c: 0, e: "üöí" })) },
            { id: 'inggeris', title: 'English Fun', emoji: 'üá¨üáß', color: 'from-slate-500 to-slate-800', data: Array.from({length: 30}, (_, i) => ({ q: `English Word #${i+1}`, o: ["A", "B", "C"], c: 0, e: "üî§" })) }
        ];

        let activeGame = null;
        let currentQIdx = 0;
        let gameStars = 0;
        let timer;
        let startTime;

        function renderMenu() {
            const container = document.getElementById('menu-screen');
            container.innerHTML = '';
            let globalStars = 0;
            games.forEach(game => {
                const savedStars = parseInt(localStorage.getItem(`stars_${game.id}`)) || 0;
                globalStars += savedStars;
                const card = document.createElement('div');
                card.className = `game-card bg-gradient-to-br ${game.color} p-6 rounded-3xl shadow-xl`;
                card.onclick = () => startThisGame(game.id);
                card.innerHTML = `<div class="text-4xl mb-2">${game.emoji}</div><h3 class="text-xl font-bold">${game.title}</h3><div class="text-amber-300 mt-2">üèÜ Terbaik: ${savedStars} ‚≠ê</div>`;
                container.appendChild(card);
            });
            document.getElementById('total-stars').textContent = globalStars;
        }

        function startThisGame(id) {
            const rawGame = games.find(g => g.id === id);
            // RAWAKKAN 10 SOALAN DARIPADA 30
            const shuffled = [...rawGame.data].sort(() => 0.5 - Math.random());
            activeGame = { ...rawGame, data: shuffled.slice(0, 10) };
            
            currentQIdx = 0;
            gameStars = 0;
            document.getElementById('menu-screen').classList.add('hidden');
            document.getElementById('game-screen').classList.remove('hidden');
            document.getElementById('result-screen').classList.add('hidden');
            showQuestion();
        }

        function showQuestion() {
            document.getElementById('face-feedback').classList.add('hidden');
            const q = activeGame.data[currentQIdx];
            document.getElementById('q-emoji').textContent = q.e;
            document.getElementById('q-text').textContent = q.q;
            document.getElementById('q-count').textContent = currentQIdx + 1;
            
            const optCont = document.getElementById('options-container');
            optCont.innerHTML = '';
            q.o.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = "bg-white/10 hover:bg-white/20 p-5 rounded-2xl text-left border border-white/10 font-bold transition-all text-lg";
                btn.textContent = opt;
                btn.onclick = () => submitAnswer(i);
                optCont.appendChild(btn);
            });
            startTimer();
        }

        function startTimer() {
            startTime = Date.now();
            clearInterval(timer);
            timer = setInterval(() => {
                const elapsed = Date.now() - startTime;
                const remain = 15000 - elapsed;
                document.getElementById('timer-fill').style.width = Math.max(0, (remain/15000)*100) + '%';
                
                let s = 1;
                if (elapsed < 3000) s = 5; else if (elapsed < 6000) s = 4; else if (elapsed < 9000) s = 3; else if (elapsed < 12000) s = 2;
                document.getElementById('live-stars').textContent = '‚≠ê'.repeat(s);
                
                if (remain <= 0) submitAnswer(-1);
            }, 100);
        }

        function submitAnswer(idx) {
            clearInterval(timer);
            const elapsed = Date.now() - startTime;
            const q = activeGame.data[currentQIdx];
            const isCorrect = (idx === q.c);

            const feedbackDiv = document.getElementById('face-feedback');
            const imgEl = document.getElementById('child-img');
            const msgEl = document.getElementById('face-msg');
            
            feedbackDiv.classList.remove('hidden');

            if (isCorrect) {
                let s = 1;
                if (elapsed < 3000) s = 5; else if (elapsed < 6000) s = 4; else if (elapsed < 9000) s = 3; else if (elapsed < 12000) s = 2;
                gameStars += s;
                
                imgEl.src = MY_CHILD.happy;
                msgEl.textContent = "PANDAINYA ANAK AYAH! üòç";
                msgEl.className = "text-3xl font-black text-green-400";
                document.getElementById('snd-happy').play();
            } else {
                imgEl.src = MY_CHILD.sad;
                msgEl.textContent = "ALA.. CUBA LAGI TAU! ü•∫";
                msgEl.className = "text-3xl font-black text-red-400";
                document.getElementById('snd-sad').play();
            }

            setTimeout(() => {
                currentQIdx++;
                if (currentQIdx < activeGame.data.length) {
                    showQuestion();
                } else {
                    finishGame();
                }
            }, 2500);
        }

        function finishGame() {
            document.getElementById('game-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');
            
            const totalPossible = activeGame.data.length * 5;
            const starRating = Math.max(1, Math.ceil((gameStars / totalPossible) * 5));
            
            document.getElementById('res-stars').textContent = '‚≠ê'.repeat(starRating);
            document.getElementById('res-msg').textContent = `Hebat! Awak dapat ${gameStars} Bintang!`;
            
            const prev = parseInt(localStorage.getItem(`stars_${activeGame.id}`)) || 0;
            if (gameStars > prev) localStorage.setItem(`stars_${activeGame.id}`, gameStars);
        }

        function goHome() {
            clearInterval(timer);
            document.getElementById('menu-screen').classList.remove('hidden');
            document.getElementById('game-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.add('hidden');
            renderMenu();
        }

        renderMenu();
    </script>
</body>
</html>
