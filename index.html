<!doctype html>
<html lang="ms" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pusat Permainan Pintar Anakku</title>
    <script src="https://cdn.tailwindcss.com/3.4.17"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        * { font-family: 'Nunito', sans-serif; }
        .game-card { transition: all 0.3s ease; cursor: pointer; }
        .game-card:hover { transform: translateY(-5px); }
        .feedback-overlay { animation: pop-in 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes pop-in { 0% { transform: scale(0.5); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
    </style>
</head>
<body class="h-full bg-[#0f172a] text-white">

    <audio id="snd-happy" src="https://assets.mixkit.co/active_storage/sfx/2013/2013-preview.mp3"></audio>
    <audio id="snd-sad" src="https://assets.mixkit.co/active_storage/sfx/131/131-preview.mp3"></audio>

    <div id="app" class="min-h-full p-4">
        
        <div class="max-w-4xl mx-auto flex justify-between items-center mb-8">
            <h1 class="text-3xl font-black text-amber-400">üéÆ Game Pintar</h1>
            <div class="bg-white/10 px-4 py-2 rounded-full text-cyan-300">
                Total ‚≠ê: <span id="total-stars" class="font-bold">0</span>
            </div>
        </div>

        <div id="menu-screen" class="max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-4"></div>

        <div id="game-screen" class="hidden max-w-lg mx-auto relative">
            <div class="flex justify-between mb-4 items-center">
                <button onclick="goHome()" class="text-sm bg-white/10 px-3 py-1 rounded">Kembali</button>
                <div id="timer-bar" class="flex-1 mx-4 h-3 bg-white/20 rounded-full overflow-hidden">
                    <div id="timer-fill" class="h-full bg-green-500 w-full"></div>
                </div>
                <div id="live-stars" class="text-amber-400 font-bold">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
            </div>

            <div class="bg-white/10 backdrop-blur-xl rounded-3xl p-6 border border-white/20 shadow-2xl relative">
                <div id="q-emoji" class="text-6xl text-center mb-4"></div>
                <h2 id="q-text" class="text-2xl text-center font-bold mb-8 leading-tight"></h2>
                <div id="options-container" class="grid grid-cols-1 gap-3"></div>

                <div id="face-feedback" class="hidden absolute inset-0 flex flex-col items-center justify-center bg-black/80 rounded-3xl z-10 feedback-overlay">
                    <img id="child-img" src="" class="w-48 h-48 rounded-full border-4 border-white mb-4 object-cover">
                    <p id="face-msg" class="text-2xl font-black"></p>
                </div>
            </div>
        </div>

        <div id="result-screen" class="hidden max-w-lg mx-auto text-center py-10">
            <div id="res-emoji" class="text-9xl mb-4">üéâ</div>
            <h2 class="text-4xl font-black text-amber-400 mb-2">Hebat!</h2>
            <div id="res-stars" class="text-4xl mb-4 text-amber-400"></div>
            <p id="res-msg" class="text-xl mb-8"></p>
            <button onclick="goHome()" class="w-full bg-amber-500 text-white font-bold py-4 rounded-2xl text-xl shadow-lg">Main Game Lain üöÄ</button>
        </div>
    </div>

    <script>
        // CONFIG GAMBAR ANAK (Gantikan URL di bawah dengan gambar anak awak)
        const MY_CHILD = {
            happy: "https://placehold.co/400x400?text=Muka+Happy", // Masukkan link gambar happy di sini
            sad: "https://placehold.co/400x400?text=Muka+Sedih"    // Masukkan link gambar sedih di sini
        };

        const games = [
            { id: 'ramadhan', title: 'Petualangan Ramadhan', emoji: 'üåô', color: 'from-emerald-500 to-teal-700', 
              data: [
                { q: "Bulan ke berapa Ramadhan?", o: ["7", "8", "9", "10"], c: 2, e: "üåô" },
                { q: "Makan sebelum Subuh?", o: ["Sahur", "Iftar", "Makan Tengahari"], c: 0, e: "üçΩÔ∏è" }
              ]},
            { id: 'math', title: 'Bijak Matematik', emoji: '‚ûï', color: 'from-blue-500 to-indigo-700',
              data: [
                { q: "2 + 3 = ?", o: ["4", "5", "6"], c: 1, e: "üî¢" },
                { q: "10 - 4 = ?", o: ["5", "6", "7"], c: 1, e: "üßÆ" }
              ]},
            { id: 'haiwan', title: 'Kenali Haiwan', emoji: 'ü¶Å', color: 'from-orange-500 to-red-700',
              data: [
                { q: "Haiwan yang ada belalai?", o: ["Kucing", "Gajah", "Zirafah"], c: 1, e: "üêò" },
                { q: "Siapa Raja Rimba?", o: ["Singa", "Harimau", "Monyet"], c: 0, e: "ü¶Å" }
              ]},
            { id: 'warna', title: 'Dunia Warna', emoji: 'üé®', color: 'from-pink-500 to-purple-700',
              data: [
                { q: "Warna Pisang?", o: ["Merah", "Kuning", "Biru"], c: 1, e: "üçå" },
                { q: "Campuran Biru + Kuning?", o: ["Hijau", "Oren", "Ungu"], c: 0, e: "üé®" }
              ]},
            { id: 'sains', title: 'Sains Cilik', emoji: 'üöÄ', color: 'from-cyan-500 to-blue-700',
              data: [
                { q: "Planet tempat kita tinggal?", o: ["Marikh", "Bumi", "Musytari"], c: 1, e: "üåç" },
                { q: "Benda yang ditarik magnet?", o: ["Plastik", "Besi", "Kayu"], c: 1, e: "üß≤" }
              ]},
            { id: 'buah', title: 'Kebun Buah', emoji: 'üçé', color: 'from-red-500 to-rose-700',
              data: [
                { q: "Raja Buah?", o: ["Durian", "Manggis", "Rambutan"], c: 0, e: "üëë" },
                { q: "Buah yang ada banyak air?", o: ["Epal", "Tembikai", "Pisang"], c: 1, e: "üçâ" }
              ]},
            { id: 'kenderaan', title: 'Lalu Lintas', emoji: 'üèéÔ∏è', color: 'from-yellow-500 to-amber-700',
              data: [
                { q: "Kenderaan di udara?", o: ["Bas", "Kapal Terbang", "Kereta"], c: 1, e: "‚úàÔ∏è" },
                { q: "Kenderaan ada siren?", o: ["Ambulans", "Lori", "Basikal"], c: 0, e: "üöë" }
              ]},
            { id: 'inggeris', title: 'English Fun', emoji: 'üá¨üáß', color: 'from-slate-500 to-slate-800',
              data: [
                { q: "What is 'Kucing' in English?", o: ["Dog", "Cat", "Bird"], c: 1, e: "üê±" },
                { q: "Color of the Sky?", o: ["Blue", "Red", "Green"], c: 0, e: "‚òÅÔ∏è" }
              ]}
        ];

        let activeGame = null;
        let currentQIdx = 0;
        let gameStars = 0;
        let timer;
        let startTime;

        function renderMenu() {
            const container = document.getElementById('menu-screen');
            container.innerHTML = '';
            let globalStars = 0;
            games.forEach(game => {
                const savedStars = parseInt(localStorage.getItem(`stars_${game.id}`)) || 0;
                globalStars += savedStars;
                const card = document.createElement('div');
                card.className = `game-card bg-gradient-to-br ${game.color} p-6 rounded-3xl shadow-xl`;
                card.onclick = () => startThisGame(game.id);
                card.innerHTML = `<div class="text-4xl mb-2">${game.emoji}</div><h3 class="text-xl font-bold">${game.title}</h3><div class="text-amber-300 mt-2">‚≠ê Rekod: ${savedStars}</div>`;
                container.appendChild(card);
            });
            document.getElementById('total-stars').textContent = globalStars;
        }

        function startThisGame(id) {
            activeGame = games.find(g => g.id === id);
            currentQIdx = 0;
            gameStars = 0;
            document.getElementById('menu-screen').classList.add('hidden');
            document.getElementById('game-screen').classList.remove('hidden');
            document.getElementById('result-screen').classList.add('hidden');
            showQuestion();
        }

        function showQuestion() {
            document.getElementById('face-feedback').classList.add('hidden');
            const q = activeGame.data[currentQIdx];
            document.getElementById('q-emoji').textContent = q.e;
            document.getElementById('q-text').textContent = q.q;
            const optCont = document.getElementById('options-container');
            optCont.innerHTML = '';
            q.o.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = "bg-white/10 hover:bg-white/20 p-4 rounded-2xl text-left border border-white/10 font-bold transition-all";
                btn.textContent = opt;
                btn.onclick = () => submitAnswer(i);
                optCont.appendChild(btn);
            });
            startTimer();
        }

        function startTimer() {
            startTime = Date.now();
            clearInterval(timer);
            timer = setInterval(() => {
                const elapsed = Date.now() - startTime;
                const remain = 15000 - elapsed;
                document.getElementById('timer-fill').style.width = (remain/15000)*100 + '%';
                let s = 1;
                if (elapsed < 3000) s = 5; else if (elapsed < 6000) s = 4; else if (elapsed < 10000) s = 3; else if (elapsed < 13000) s = 2;
                document.getElementById('live-stars').textContent = '‚≠ê'.repeat(s);
                if (remain <= 0) submitAnswer(-1);
            }, 100);
        }

        function submitAnswer(idx) {
            clearInterval(timer);
            const elapsed = Date.now() - startTime;
            const q = activeGame.data[currentQIdx];
            const isCorrect = (idx === q.c);

            // Tunjukkan Muka Anak
            const feedbackDiv = document.getElementById('face-feedback');
            const imgEl = document.getElementById('child-img');
            const msgEl = document.getElementById('face-msg');
            
            feedbackDiv.classList.remove('hidden');

            if (isCorrect) {
                let s = 1;
                if (elapsed < 3000) s = 5; else if (elapsed < 6000) s = 4; else if (elapsed < 10000) s = 3; else if (elapsed < 13000) s = 2;
                gameStars += s;
                
                imgEl.src = MY_CHILD.happy;
                msgEl.textContent = "WAH, BETUL! üòç";
                msgEl.className = "text-2xl font-black text-green-400";
                document.getElementById('snd-happy').play();
            } else {
                imgEl.src = MY_CHILD.sad;
                msgEl.textContent = "ALA, CUBA LAGI! ü•∫";
                msgEl.className = "text-2xl font-black text-red-400";
                document.getElementById('snd-sad').play();
            }

            // Tunggu 2 saat sebelum soalan seterusnya
            setTimeout(() => {
                currentQIdx++;
                if (currentQIdx < activeGame.data.length) {
                    showQuestion();
                } else {
                    finishGame();
                }
            }, 2000);
        }

        function finishGame() {
            document.getElementById('game-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');
            const totalPossible = activeGame.data.length * 5;
            const rating = Math.ceil((gameStars / totalPossible) * 5);
            document.getElementById('res-stars').textContent = '‚≠ê'.repeat(rating);
            document.getElementById('res-msg').textContent = `Berjaya kumpul ${gameStars} bintang!`;
            const prev = parseInt(localStorage.getItem(`stars_${activeGame.id}`)) || 0;
            if (gameStars > prev) localStorage.setItem(`stars_${activeGame.id}`, gameStars);
        }

        function goHome() {
            clearInterval(timer);
            document.getElementById('menu-screen').classList.remove('hidden');
            document.getElementById('game-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.add('hidden');
            renderMenu();
        }

        renderMenu();
    </script>
</body>
</html>
